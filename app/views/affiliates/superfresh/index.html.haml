.superfresh
  = affiliate_center_breadcrumbs( [ link_to(@affiliate.display_name, affiliate_path(@affiliate)), 'On-demand Indexing'] )

  .col-1
    %h1.title
      On-demand Indexing&trade;
    %p
      Are a few new, modified, or moved pages on your site not showing up in the Bing&trade; index?
      Use our On-demand Indexing&trade; feature to make sure searchers on your site can find these pages.
    %p
      How does it work? It is a three-step process.

    %ol.numbered
      %li
        As soon as you add a page to Bing&trade;, we will include it in USASearch's
        = link_to 'boosted content', affiliate_boosted_contents_path(@affiliate)
        index and mark it with an "Autogenerated" flag. Searchers on your site will see this page at the top of the search results page.
      %li Bing&trade; should include your page in its index within 24 hours.
      %li We will verify that your page is in the Bing&trade; index and we will remove the duplicate entry from the USASearch index after seven days.

    %p.wrap-links
      = link_to 'Single URL', "#singleurl"
      = link_to 'Bulk Upload', "#bulkupload"
      = link_to 'Status', "#status", :class => 'last'

    .wrap-content
      %a{:name => "singleurl"}
      = form_for @superfresh_url, {:url => affiliate_superfresh_urls_path(@affiliate)} do |f|
        = f.label :url, "<h3>Single URL</h3>".html_safe
        = f.text_field :url, :class => 'txt'
        = f.submit "Submit", :class => 'btn-submit submit'
      %span.note (for example, http://www.sample.gov/folder/mypage.html)

    .wrap-content
      %a{:name => "bulkupload"}
      %h3 Bulk Upload
      %p
        To upload a list of URLs to be crawled by Bing&trade;, follow these instructions:
      %ul.bulk-upload-instructions
        %li
          Create a new text file following same format as the sample below.
        %li
          Save the file as filename.txt on your computer; you can name the file whatever you like, as long as it's plain text.
        %li
          %b
            Do not use Microsoft Word files
          , or any other file type, except plain text.
        %li
          Add, modify or delete individual entries in the file.
        %li
          Browse for the file on your computer
        %li
          Upload the file to Search.USA.gov using the form below
        %li
          Maximum of
          %b
            100 URLs
          per file.
      %p
        %strong
          Sample file format:
        %ul.sample-file-format
          %li
            %span
              http://www.sample.gov/1.html
          %li
            %span
              http://www.sample.gov/2.html
          %li
            %span
              http://www.sample.gov/3.html
        = form_tag upload_affiliate_superfresh_urls_path(@affiliate), :multipart => true do
          = file_field_tag 'superfresh_urls', :accept => 'text/plain', :class => 'file'
          = submit_tag "Upload", :class => 'submit btn-upload'

    .wrap-content.status
      %a{:name => "status"}
      %h3 Status
      .wrap-table
        %table
          %thead
            %tr
              %th Uncrawled URLs (#{@uncrawled_urls.size})
            %tr
              %th.secondary-header URL
          %tbody
            - @uncrawled_urls.each do |uncrawled_url|
              %tr{:class => cycle('even', 'odd')}
                %td.uncrawled-url
                  = link_to "Remove URL", affiliate_superfresh_url_path(@affiliate, uncrawled_url), :title => "Remove URL", :confirm => "You are about to remove this URL. Are you sure?", :method => :delete, :class => 'remove-url-button'
                  .remove-url-wrapper
                    = link_to uncrawled_url.url, uncrawled_url.url, :class => 'remove-url'
      .wrap-table
        %table
          %thead
            %tr
              %th{:colspan => 2} Previously Refreshed URLs
            %tr
              %th.secondary-header URL
              %th.secondary-header Crawled At
          %tbody
            - @crawled_urls.each do |crawled_url|
              %tr{:class => cycle('even', 'odd')}
                %td.crawled-url
                  = link_to crawled_url.url, crawled_url.url
                %td
                  = crawled_url.crawled_at
      %div{:style => "text-align: center;"}
        = will_paginate @crawled_urls

  .col-2
    .side-note
      %strong
        Learn more
      about our On-demand Indexing&trade; feature by going to our new section in the
      = link_to "Help Desk", "http://searchsupport.usa.gov/forums/292892-add-to-bingtm-to-insert-new-content", :target => '_blank'
    .side-note
      %strong
        Not sure what the URLs are for your new or modified pages?
      Email us at
      %a{:href=>"mailto:USASearch@gsa.gov"}
        USASearch@gsa.gov
      and we can help you identify specific URLs that have recently changed on your site.
    .side-note
      %strong
        Please note
      that you still need to register with Bingâ„¢ webmaster tools to have your site, and sitemap, indexed by Bing&trade;.
      %br
      %a{:href=>"http://www.bing.com/toolbox/webmasters/", :target=>"_blank"}
        Register for Bing webmaster tools.
    .side-note
      %strong
        Another Way to Highlight Content
      %p
        = link_to "Boosted Content", affiliate_boosted_contents_path(@affiliate)
        \-- Display specific pages above the main search results.


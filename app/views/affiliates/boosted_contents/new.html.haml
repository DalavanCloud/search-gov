.boosted-sites.span-24
  = affiliate_center_breadcrumbs([link_to(h(@affiliate.display_name), affiliate_path(@affiliate)), "Boosted Content"])

  .span-17.append-1.last
    %h1 Boosted Content
    %p
      Boost content to make specific pages appear above the main search results displayed on your pages.
      Boosted Content appears above other pages whenever words in a searcher's query match text in the page's title, URL, or description.

    %p
      = link_to("Add a New Entry", "#add_a_new_entry")
      &nbsp; | &nbsp;
      = link_to("Edit / Delete Current Entries", "#edit_delete_current_entries")
      &nbsp; | &nbsp;
      = link_to("Bulk Upload", "#bulk_upload")

    #add_a_new_entry
      = render :partial => "form"
    %br


    #edit_delete_current_entries
      .header-box
        = link_to(content_tag(:button, "Delete All"), destroy_all_affiliate_boosted_contents_path(@affiliate), :method => :delete, :confirm => "Are you sure you want to delete all of your Boosted Content?\nThis action can not be undone.", :style => "float: right;")
        ="Edit / Delete Current Boosted Entries"
      - if @boosted_content_count == 0
        .content-box= "Affiliate #{h(@affiliate.display_name)} has no Boosted Content"
      - else
        %table.admin-table#boosted_contents
          %tr
            %td{:colspan => 5}
              - if @boosted_contents.length < @boosted_content_count
                = "Affiliate #{h(@affiliate.display_name)} has #{@boosted_content_count} Boosted Content entries."
                %br
                = "Displayed below are the most recent #{Affiliates::BoostedContentsController::NUMBER_TO_DISPLAY_IF_ABOVE_MAX} entries."
                %br
                Please use the Delete All and Bulk Upload features to edit the rest of the entries.
              -else
                = "Affiliate #{h(@affiliate.display_name)} has #{@boosted_content_count} Boosted Content entries."
          %tr
            %th Title
            %th URL
            %th Description
            %th Keywords
            %th Actions
          - @boosted_contents.each do |boosted_content|
            %tr{:class => cycle('even', 'odd')}
              %td= truncate(boosted_content.title, :length => 50)
              %td= link_to(shorten_url(boosted_content.url, 20), boosted_content.url, :target => "_blank", :title => boosted_content.url)
              %td= truncate(boosted_content.description, :length => 50)
              %td= truncate(boosted_content.keywords, :length => 50)
              %td.actions
                = link_to("Edit", edit_affiliate_boosted_content_path(@affiliate, boosted_content))
                %br
                = link_to("Delete", affiliate_boosted_content_path(@affiliate, boosted_content), :method => :delete, :confirm => "Are you sure you want to delete this Boosted Content entry?  ")

    #bulk_upload
      - form_tag bulk_affiliate_boosted_contents_path(@affiliate), :multipart => true, :class=> "bordered" do
        %h2="Bulk Upload Boosted Content for #{h(@affiliate.display_name)}"
        %h4 Instructions
        %ol
          %li
            Create a new XML file using the format in the example below.
          %li
            Save the XML file as {filename}.xml on your computer.
          %li
            Add, modify, or delete individual entries in the file.
          %li
            Browse for the file on your computer.
          %li
            Upload the file to GSA's server.

        %h4 Example Boosted Content XML
        %pre
          = preserve do
            :escaped
              <xml>
                <entries>
                  <entry>
                    <title>This is a listing about Texas</title>
                    <url>http://some.url</url>
                    <description>This is the description of the listing</description>
                  </entry>
                  <entry>
                    <title>Some other listing about hurricanes</title>
                    <url>http://some.other.url</url>
                    <description>Another description for another listing</description>
                  </entry>
                </entries>
              </xml>

        %h4 Important Notes
        %p
          :escaped
            Note that the fields in your XML file are case sensitive and everything must be lower case so enter them as <title>, <url>, and <description>. (The system will prevent you from uploading files using title case or all caps so do not use <Title>, <URL>, <Description>, for example.)
        %p
          Also, be sure to enter a title, url, and description field for every entry. (They are mandatory so the system will prevent you from uploading files without a field for every entry.)

        %h4 Select Boosted Content XML
        = file_field_tag 'xml_file', :accept => 'text/xml'
        = submit_tag "Upload"


  .span-6.last
    .content-box.cross-promotion
      %h4 Another Way to Highlight Sites
      %p
        = link_to "Add to Bing", affiliate_superfresh_urls_path(@affiliate)
        %sup TM
        \-
        Identify new, modified, or moved pages for Bing to crawl and index.

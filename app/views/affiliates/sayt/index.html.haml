.span-24
  = affiliate_center_breadcrumbs([ link_to(@affiliate.display_name, affiliate_path(@affiliate)), 'Type-ahead Search'])

.span-16.last
  %h1 Type-ahead Search
  %p
    Enable type-ahead search to provide your customers with suggestions as they type their search in your site's search box.
  - if @affiliate.is_sayt_enabled?
    %p
      = link_to "Preferences", "#preferences"
      &nbsp; | &nbsp;
      = link_to "Preview", "#preview"
      &nbsp; | &nbsp;
      = link_to "Add a New Entry", "#add_a_new_entry"
      &nbsp; | &nbsp;
      = link_to "Current Entries", "#current_entries"
      &nbsp; | &nbsp;
      = link_to "Bulk Upload", "#bulk_upload"

  #preferences{:style => 'margin-bottom: 20px;'}
    = form_tag preferences_affiliate_type_ahead_search_index_path(@affiliate), :class => 'bordered' do
      %h2
        Preferences
      %ul{:style => 'list-style-type: none;'}
        %li
          = check_box_tag 'is_sayt_enabled', '1', @affiliate.is_sayt_enabled?
          Enable type-ahead search
      = submit_tag "Set Preferences"

  - if @affiliate.is_sayt_enabled?
    #preview{:style => 'margin-bottom: 25px;'}
      %h2
        Preview
      = text_field_tag 'search', nil, { :size => 49, :name => "query", :autocomplete => "off", :class => "usagov-search-autocomplete" }

    #add_a_new_entry{:style => 'margin-bottom: 25px;'}
      = form_for @sayt_suggestion, {:url => affiliate_type_ahead_search_index_path(@affiliate)} do |f|
        %h2
          Add a New Entry
        = f.label :phrase
        = f.text_field :phrase
        = f.submit "Add"

    #current_entries{:style => "margin-bottom: 25px;"}
      %h2
        Current Entries
      = form_tag affiliate_type_ahead_search_index_path(:anchor => "current_entries"), :method => :get do
        = label_tag "Filter Entries:"
        = text_field_tag "filter", @filter
        = submit_tag "Filter"
        = link_to 'Remove Filter', affiliate_type_ahead_search_index_path(:anchor => "current_entries") if @filter.present?

      %table#sayt-suggestions.admin-table{:style => 'margin-bottom: 0px;'}
        %tr
          %th
            Type-ahead suggestion
          %th
            Actions
        - if @sayt_suggestions.blank?
          %tr
            %td{ :colspan => 2 } Site #{@affiliate.display_name} has no type-ahead search suggestions
        - else
          - @sayt_suggestions.each do |sayt_suggestion|
            %tr{:class => cycle('even', 'odd')}
              %td.sayt_suggestion
                = sayt_suggestion.phrase
              %td.sayt_actions
                = button_to "Delete", affiliate_type_ahead_search_path(@affiliate, sayt_suggestion), :title => "Remove", :confirm => "You are about to remove this type-ahead suggestion. Are you sure?", :method => :delete
        - if @sayt_suggestions.count > 1
          %tr#delete_all
            %th{ :colspan => 2 }
              = button_to "Delete all", destroy_all_affiliate_type_ahead_search_index_path(@affiliate), :confirm => "You are about to delete all of your type-ahead suggestions. Are you sure?", :method => :delete
      %div{:style => "text-align: center; margin-bottom: 10px;"}
        = will_paginate @sayt_suggestions

    #bulk_upload{:style => 'margin-bottom: 25px;'}
      = render :partial => 'bulk_upload_form', :locals => { :upload_path => upload_affiliate_type_ahead_search_index_path(@affiliate) }

.span-8.last
  .content-box.image= image_tag "side_notes/sayt.png"

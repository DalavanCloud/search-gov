.rss-feeds
  = affiliate_center_breadcrumbs([link_to(@affiliate.display_name, affiliate_path(@affiliate)), "RSS"])
  .column-2
    .side-note-image= image_tag "side_notes/rss_1.png"
    .side-note-image= image_tag "side_notes/rss_2.png"
  .column-1
    %h1 RSS
    = render_help_link(@help_link)
    .rss-feed-list
      %table
        %colgroup
          %col{ :class => 'name' }
          %col{ :class => 'url' }
          %col{ :class => 'actions' }
        %thead
          %tr
            %th{ :colspan => 3 }
              = link_to "Add new RSS feed", new_affiliate_rss_feed_path(@affiliate), :class => 'add-link'
              - unless @rss_feeds.blank?
                %span= page_entries_info @rss_feeds, :html => false
        %tbody
          %tr.column-header
            %th Name
            %th URLs
            %th Actions
          - unless @rss_feeds.blank?
            - @rss_feeds.each do |rss_feed|
              %tr.row-item
                %td.name= link_to rss_feed.name, [@affiliate, rss_feed]
                %td.url
                  %ul
                    - rss_feed.rss_feed_urls.each do |rss_feed_url|
                      %li= link_to shorten_url(rss_feed_url.url, 35), rss_feed_url.url, :title => rss_feed_url.url
                %td.actions
                  = link_to("Preview", news_search_url(:protocol => 'http', :affiliate => @affiliate.name, :channel => rss_feed.id), :target => '_blank')
                  = link_to("Edit", edit_affiliate_rss_feed_path(@affiliate, rss_feed))
                  = button_to("Delete", [@affiliate, rss_feed], :method => :delete, :data => {:confirm => "Are you sure you want to delete this RSS feed?"}) unless rss_feed.is_managed?
          - else
            %tr
              %td.empty{ :colspan => 3 } Site #{@affiliate.display_name} has no RSS feeds
      = will_paginate @rss_feeds


<% url_options = params_for(:action => :create) -%>
<%=
form_tag url_options,
         :onsubmit => onsubmit,
         :id => element_form_id(:action => :create),
         :multipart => active_scaffold_config.create.multipart?,
         :class => 'create'
-%>

  <h4><%= active_scaffold_config.create.label(active_scaffold_config.sti_create_links ? @record.class.human_name(:count => 1) : nil) -%></h4>

  <div id="<%= element_messages_id(:action => :create) %>" class="messages-container">
<% if request.xhr? -%>
    <%= error_messages_for :record, :object_name => @record.class.human_name.downcase %>
<% else -%>
    <%= render :partial => 'form_messages' %>
<% end -%>
  </div>

  <%= render :partial => 'form', :locals => { :columns => active_scaffold_config.create.columns } %>

  <p class="form-footer">
    <input type="submit" value="Create" class="submit"
           onClick="var oEditor = FCKeditorAPI.GetInstance('record_<%=@record.id%>_<%='html'%>_editor');
           $('record_<%=@record.id%>_<%='html' %>_editor_hidden').value = oEditor.GetXHTML();" />
    <%= link_to as_(:cancel), main_path_to_return, :class => 'cancel' %>
    <%= loading_indicator_tag(:action => :create, :id => params[:id]) %>
  </p>

</form>
<script type="text/javascript">
Form.focusFirstElement('<%= element_form_id(:action => :create) -%>');
</script>

= spelling_suggestion(@search.spelling_suggestion, @affiliate) if (@search)
- if (@search && @search.results.size > 0)
  = results_summary(@search.startrecord, @search.endrecord, @search.total, @search.query)
  - @search.results.each_with_index do |result, index|
    %div.searchresult{:id => "searchresult#{index+1}"}
      %h2= display_result_title(result)
      %h3 #{result['content']}
      %h3= display_result_links(result)
      = display_deep_links_for(result)
  = will_paginate(search.results, :previous_label => (t :prev_label), :next_label => (t :next_label))
- elsif (@search.error_message)
  %p.noresults #{@search.error_message}
- else
  %p.noresults= t :no_results_for, :query => @search.query
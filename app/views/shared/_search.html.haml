- path = @search.is_a?(ImageSearch) ? image_search_path : search_path
- form_tag(path, :method => :get, :id => "search_form") do
  = its_beta if @affiliate
  - search_params = {:query => params[:query], :locale => params[:locale]}
  %ul.navigation
    %li.first= link_to_unless web_search?, t(:government_web), search_path(search_params)
    %li= link_to_unless image_search?, t(:images), image_search_path(search_params)
  = label(:search, :query, "Search Query:", :class => :hidden)
  - if @affiliate or not english_locale? or @search.is_a?(ImageSearch)
    = text_field :search, :query, {:size=>50, :name=>"query", :autocomplete => "off"}
  - else
    = text_field_with_auto_complete :search, :query, {:size=>50, :name=>"query", :autocomplete => "off"}, {:url=> {:controller => "searches", :action => "auto_complete_for_search_query"}, :method=> :get, :min_chars => 2, :after_update_element => "function(element,value){ element.parentNode.submit(value) }", :frequency => 0.1 }
  = hidden_field_tag :affiliate, @affiliate.name unless @affiliate.nil?
  = hidden_field_tag :locale, I18n.locale
  = hidden_field_tag :m, params[:m]
  = submit_tag(t :search, :id => "search_button")
  = link_to t(:advanced_search), advanced_search_path
  = link_to(t(:search_in), home_page_path(:locale => other_locale_str)) unless @affiliate

:javascript
  document.getElementById("search_query").focus();
